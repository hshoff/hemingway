//     (c) 2012 Airbnb, Inc.
!(e => {
  "use strict";function g(e){return T(p,e)>=0?"shift":T(c,e)>=0?"cmd":T(d,e)>=0?"ctrl":T(h,e)>=0?"alt":!1}function y(e,t){var n=!1;switch(e){case"shift":n=T(p,t)>=0;break;case"cmd":n=T(c,t)>=0;break;case"ctrl":n=T(d,t)>=0;break;case"alt":n=T(h,t)>=0}return n}function b(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.detachEvent&&e.attachEvent("on"+t,n)}function w(e,t,n){e.addEventListener?e.removeEventListener():e.detachEvent&&e.detachEvent("on"+t,n)}function E(e){if(M.call(this,e))return;var t=e.keyCode;T(o,t)==-1&&o.push(t);if(t in r)return;if(!(t in s))return;for(var n=0;n<s[t].length;n++){var i=s[t][n];for(var c=0;c<o.length;c++){var h=o[c];h in r&&(r[h]=!0)}(i.scope==O()||i.scope=="global")&&i.shift==r[u]&&i.cmd==r[l]&&i.alt==r[f]&&i.ctrl==r[a]&&i.fn(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&event.stopPropagation(),e.cancelBubble&&(event.cancelBubble=!0))}}function S(e){
    var t=e.keyCode;
    var n=T(o,t);
    n>=0&&o.splice(n,1),t in r&&(r[t]=!1)
  }function x(){o=[];for(var e in r)r[e]=!1}function T(e,t){if(!Array.prototype.indexOf){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}return e.indexOf(t)}function N(e){for(var t=0;t<e.length;t++){var n=e[t];C(n.shortcut,n.fn,n.hasOwnProperty("scope")?n.scope:undefined)}}function C(e,t,n){
    var r;
    var i;
    var o={shift:!1,cmd:!1,alt:!1,ctrl:!1};
    n===undefined&&(n="global"),i=e.replace(/\s/g,"").split(",");for(var u=0;u<i.length;u++){e=i[u],r=e.split("+");if(r.length>1){var a=r.splice(0,r.length-1);for(var f=0;f<a.length;f++){
      var l=a[f];
      var c=g(l);
      l!==undefined&&y(c,l)&&(o[c]=!0)
    }r=[r.pop()]}r=r[0],r=m[r]||r.toUpperCase().charCodeAt(0),r in s||(s[r]=[]),s[r].push({shortcut:e,scope:n,fn:t,key:r,shift:o.shift,cmd:o.cmd,alt:o.alt,ctrl:o.ctrl})}
  }function k(e){}function L(e,t,n){}function A(e){i=e}function O(){return i}function M(e){var t=(e.target||e.srcElement).tagName;return t==="INPUT"||t==="TEXTAREA"||t==="SELECT"}
  var t=e.maestro;
  var n={};
  var r={16:!1,17:!1,18:!1,91:!1};
  var i="global";
  var s={};
  var o=[];
  var u=16;
  var a=17;
  var f=18;
  var l=91;
  var c=[l,"cmd","command","⌘",""];
  var h=[f,"alt","option","⌥"];
  var p=[u,"shift","⇧"];
  var d=[a,"control","ctrl","⌃"];
  var v={shift:u,"⇧":u,control:a,ctrl:a,"⌃":a,alt:f,option:f,"⌥":f,cmd:l,command:l,"⌘":l,"":l};
  var m={backspace:8,tab:9,clear:12,enter:13,"return":13,escape:27,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,"delete":46,del:46,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};
  b(document,"keydown",E),b(document,"keyup",S),b(window,"focus",x),n.registerAll=N,n.register=C,n.unregisterAll=k,n.unregister=k,n.ignore=M,n.setScope=A,n.getScope=O,n.noConflict=() => (window.maestro=t, n),e.hasOwnProperty("provide")&&e.provide!==undefined?e.provide("maestro",n):e.maestro=n
})(window);